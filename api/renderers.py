import vobject

from django.conf import settings

from rest_framework import renderers


class vCardRenderer(renderers.BaseRenderer):
    media_type = "text/x-vcard"
    format = "vcf"

    def render(self, data, accepted_media_type=None, renderer_context=None):
        vCard = vobject.vCard()
        vCard.add("FN").value = "Firefox Relay"
        # TODO: fix static urls
        # photo_url is a base64 encoding of /static/images/email-images/relay-logo-vcard.png
        photo_url = "iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LjljY2M0ZGU5MywgMjAyMi8wMy8xNC0xNDowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjMgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjgxNjQwMjQwNzIxMTFFRDgyREFEMkI1QjYxNzQ1RjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjgxNjQwMjUwNzIxMTFFRDgyREFEMkI1QjYxNzQ1RjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCODE2NDAyMjA3MjExMUVEODJEQUQyQjVCNjE3NDVGMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCODE2NDAyMzA3MjExMUVEODJEQUQyQjVCNjE3NDVGMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkTS+8oAAD2QSURBVHja7H0JmF3Fdeapuvdt/XqXurW3hCSQBBKIHYRZDJgl4LA5fPHGOJkE5xs7Yzu2k0mczCRf8k2SsZ3ETiZxxs4ygRDbmNgmGBuMDTb7LoEQaF9QS2otvXe/7d6quXWr6tSp13JmJslMS3q3Pj7Ry+vXr9/971n+c85/WGWfhOxk59/68OwtyE4GrOxkwMpOBqzsZCcDVnYyYGUnA1Z2spMBKzsZsLKTASs72cmAlZ0MWNnJgJWd7GTAyk4GrOxkwMpOdjJgZScDVnYyYGUnOxmwspMBKzsZsLKTnQxY2cmAlZ0MWNnJTgas7GTAyk4GrOxkJwNWdjJgZScDVnaykwErOyfQCbO34J85UwdBRDD2Boy9CfURYBIggI5l0LUG8h1QXg5BMXuTjn9Ypuh33FM9BiNvweAjUBmCfBmCHPAQmHrDgNUhqipgda2F/iuhtADSb2QnA9Y/exITNboN9j+mDFWhB1hi0yUEKXQ4S4ElgCURhAAxrb7Vfy10ng7tp2fwyoD1kyDVgIn9cODHMLJRQScsA8TAuUIP1+FoAimm8MO16Uq+k8BrEtoWQvf5MPcqYEH2LmbA8iHVqMGeB+HoRoAGhCXggcJTip/UEkkFKQMyln4K6iv60+THk/Cr0A/d58HcKzPTlQErAYYEEcO2r8Lo1hQfoCClQaPhkSBGgczaKgMsZr/FFPwSRyljhcgkDisNQN+7oLAAglIGrJY1VDEc3QJv/i0EeeXdFHS4ggiiKuDGVhmLhXjiCpHGIabfYukHCnZSfau8Evquh3x/GqJlwGohQwUwuhveuldlf4njUzaIW4iACap0hJ6ETUw4qKlAntsQPv0WpHA00RhYhEUKoAm2Os+DsCsDVmtAKrFSh16CQ88qyiBBA7ORk3Z5AM4+aTBpkCVASR4gdYbI1CPVzwr1hMkHPPWqiEv942Iccj0w90ZoWwNBOQPWqXvGB2HwBTj0IkRjkO8yYThCR/s4EaWIYebrIE3MztLPmTThvMFcatXApor6SXTIr9wlqMCrcQw6z4Gea6C0vIXSxlYBVlSH/c/B/qdgYh/kOyEIPNNisj8bLXEbaWnvZgJ2baKkeii3KaEmt2TqHyW4nNE8Un+Q/L8GsgHt50H7Wiifpej7DFgn/amOw7Ft8PaTMLYHglDF6QgOmYbnUlgGwSKMI9r016UyRTxN/cwHwvhNjSpjrpLHpk+LSNWw08+cOE1Rg3w3lFZD708By53iddpTGVj1SahOwWt/B9ND6vKHoYFOoGMpCxfnDdMPDaqkBwttiphFIU8/SECZ5JU8BG69obFSgfOPJi0QxhYmQb1yuHkonwvdN6aekWXAOql4hNokvHafslWqzMfNNTaJm7VYIInbYsYyGXdm8ztnuhAcGHvpb+nkMX0Mhlm6qug8Y2rY9G9X/wj1X9gOvbdB2A9Bdwask8JQVWD/y7D5XpX0scC4Nu2MHFxSYl3ldIxUAJmf1nELNUjZhMAEYSqiAhuwp0CUwkTx2j5xbh+f1nxM3AZeJKezgST2Kg5A5/WQGzjVGK9TB1jJ9Y5jOLAJ3vgaNKYg3+7sky4bM3BmCf/VdkV9bIkoFxWlz8kJ1Ixrs9DUeNLOkZFnBnCPNCG/pTqSBwSWZTVpQRJ7VaHzaiidA+FC44IzYJ0wvk/C7qfg7edheKsyVEEhBRO44gwmcY6FsgE254Q9t5VBUw3klvCkFAOGTdwYpECbI0FYVub8o84PmK1ha2AhUnW+GY9D2AnlS6BtA/COUyHwOhWANfg67H0WRnYqQ1Vot3G3DWiMRQHDjxujkiLDFJUtL6pJBClIsZkQV4aDCFTRBmHKbA6I4T/YgF3/aoNsdIXp8yPZAbZRgqfeNoFX8TTInw7t1wDkM2DN3qlMwtZH4MCrUBlO2/ECy2RKCwVhYiMgUQ4Wks1XaAJofZmOmQLS46CBpcHBbXsW5n06YtNA1IhUxZ8k/NLPww12A1vP5gSaACRFqAIvQa4PCudB8dyTuMP3ZAXW6AFlqPb8GOpT6rKxkIQ1PtsJ1t1gwG4cHPN7FsDaJ/+qo38shOoq6/yuLpXz5RaCxihiPoieTpp2Cf2LkC9Fl+qoMoQXS582UkRXfhm03wKs7aSE18kHrKlhGD8Kz/2l9SnMdCU4OkrbJ4zBuY3f0UrZmNoLyQlr4Mo1upcBoLMAI5XGsdrhWETtuc7F5Z7kQZXI8RTaLqrPhCnm0KjfeElCQCCgA24pVsJxgO2VYHUoXght1wG0ZcD6f3YaNTi2HzY9AMM7oNhlTUJgrwFhqgAckmiqz7EZwdJOGJDhk4C1NEifdhXgxUOvP7rzge0jr9dFrbfUv2HhtTevvLkUdArh7BB6WNfIxVzqoF8eFqqRITMvDFw8B9a36jxDVtXXO98L0AvBggxY/9ZUwsQwbH0c3nwY2roUh64bhQ3xGJiuFVMntqy6oaZsBgfIIeF1RQwxr8wHpJLTlYcXDrz6uRd+9WjlQD4sJWiM4vp0NHXT8vd/4oJP5Xi7xOohmB+XTRVDG797BhIcneZliNJPYG28yKYgHIDCBgjXAuROAmCd6N5bxFCtwvYnYct3Va2tPCcFkw2PpGWDNPiYjZHNtUnBJIUrxWgniKbIwA4fo690esm1aUku7XBNfG3r/xitHuvI92pQFoJCMdf2vd1fPXfeJVcPXBdoz2djfwnmhYUpaCS+GIIwQ2IxEMIWDC31iv9yXXnEMK4d4sMwfT8UtkFuPfBVGbD+FSeK4LXvwt6XYPyA4hGSvE91EkP6djPrtjDXt2jQIEP3xKwJkTb8Sh4shKkla+shCSGugcpsz/HGw08PTuwq5kqMcEsBCwth6ft7vnnFoncGQUHhWxAApcmBEKSqzQ3IkodJbnyijtYlhl/gOAj14BR/wqYL6qlClaPUXoXGW1BYB7krAOacuIzXCQqs5O3d/BjseQEqI9CoQKnTheEAxmJJm/ZL9GvMVH/RgSJ7js0L5tlt4x4y3frqSiwe22yg1qgkATtjrMk3J3ZrtHZMgPaELgMFCxpjJlNYC3S43Lx+y0iYOAx0mgnuSfCuMCi0DWFBh3ra2ksQ74JgBeSvA9l2IsLrhANW8iaOj8CTfwUTQxA3lEMJi/a2FtbjpG+xtA5F2x59eaRN6DSZafAkjFXTV0sDjqU1GcpL4Qvg9lvJ8wQ8UH5J+hdPWRHJdSUyNt+SlA8DZyZNM6A1WswyZ/iUEgN5Sfy4tWESv2j7LxTaymrsTL4JYgfkLgN+4QkXeIUnFKT2b4GdL8Dbr6Y1Na4aE5CaAuvFaPomMR6yXcKOemD+v2CwggG7JImhZKYmk3wjsIy5fVmM0UuNNk9BlqkfCbDhJgUZvgawzwmkUmkfi/yqw5MDmvtAklISfaOYvnRpnbHxfeCbIH87yO4kAMyA5Z+j+9V/z9+nLmq+ZDsRwMQlJhZhlvsmxgYsu53GROkPWoTp6ypTX4OBsLZVunEFmIEUB0eZGoOE3RDcXWtJYrv0ySVwh0jdBqjhrqBpgy2ECNAeQOnKzaZN1e+y9xICEniZMB/M86tfnQN5DKqfg3A9hDeC7DkhPOPsA6tWgd2vwabvwsguaJ9rcz3i4EyixG3NBG9ZfTk5IYRsJqitmjYnSE1JS8FLQj6ZyiDY6IqZDmMm3ayzM1YzLBemDtLWHKXttDH8vk059Q9KEs8BYd6F7dYSNns1uLKoYpI4TXSO+OKTt6sXxFtQewMK7wa5EGBpawOrWoVnvgFvfl+xU+W5xPgz649s4mYSJWuBGENi0bVDgS0OSmmUYcDaPLz1XQaAVsFyEJ73SWERx/ZhiGbM0ZgDirnesXWC6WSY7prXdki/HrQ0EgtK3PFqaFwhdbCGWrPtzhiHmU4e6aW6xtYWFQPceBCCAQhuBTGrbOps9l1PTcBT/wA7n4H2PtXg62geJKX0pwHJthi5zAGxGdLF9QZVQDI+bgJ54xylpbltOI+pgEvubGM7s+aL4QA0azZY5iHcuSpDyVJOxMJLf2DMrVQmCsBhFGjqSv8WaI7xmL03JPpollroTpBHIP4S8H0tCaxYwHMPwK7nIVd0BWOZvtf6/RKxGU9QH0gX+aI/0km4tBfApO/SWp2AkEOQBmf4eEYhQdhtzOwCj30wwbr02AT9kcGNdaAqmhYm+jL2L8WxtJVBYF5ZEKyjp5P70nLxXjxn2WCM/R0W7VM5ujgEGYD4n8BHWw9YR/bD9mcgV3KJtBDEHnDrOPRlCDzX4zVqci/OBeZYbMBgPHaWz1ipOAWxcISqpBl+rNAM0rFZjDJMjBgQ5uDoTCOYAFGC87DA7KShhh3eGD5K0OEiiKV0Nwwwz3gxwkQgOWxeV5ozyn8EFrUSsCIBT90HYcHFnpJZC2EDc2ZzdYFMgeWxzDVL80EmSAIItt2OExbbIlJnlEisQxNWdFpnv+uMkIXPDIslNXCFIDhGG8M8ytT8FdIN/+B3GXi99tz+Xilt5kuMlrOszKs3YKRF802ZZIvbgY/MTrvz7ABrcgQOvqFoKiEsPy7IJeHGkZnoityv0hZeJDPJtrRtJxCQhwn7ZgYmKD5OVmejExOgcMsyaIui9YmMX5aUuGcUZJS01FAQ5rc7j4ZtMIhXMC7Skbq2HuVgLXxfaX+1mEF9oWOPCbjN+1MG+JHhTVoCWG+lugnAvIKxJHGJu+3A+URkR8Fm5rpsYsgC4SJb5vOo5jIEBjeS1OZ0XqYuszVXQrpor4nDtBhzZUEsY5tUjhurae6TtCgJzHlSjw8jASX9AL0qUFvFXCc+PomkLDH+9cLa2jS/Ec/OTuo/O8Da/QqEOduhQEtm1mzo6wHCdu1xizbm0jesD2J/FVaBE5RogyGs02T2GfDdZ4ykjbTXFFxTFHM9LuSR1MNKm2OmL1jEjmV1LXv4qgT5FhCOFxzimTWikiQNDM0VVo2IK1dftzkBMn9oC2UB2ETLAKsy4sWhzAZAzMZS+i0TOvwC6xYlGbGKU9AIG7dylzS5IJpwByBcldoL+YUzjYZiSK8ft7xlU4AiJU3QmHkeYS453hsaBDTJNXaUObNHaVZGLDSC0pBbhFZALQnnkW3pU9LEQpLiVQis0jLAEtqdcZLzM9cxwmb8C8IVB81V4a5ZFANqHVgwG+BjEO0oVuFYUxp4AXe1SGyocsEczfYphSElRkVgdQBlTLgJQRqUgVgg5nME5JbANJPZRISBm39EbkXO8JPoaoFwEObtmg0Nktlh3rnNwtTHoRu7A3uLB8x9ypiLdrHRRY0jB1AMUkWGGBpSEWORcLcvt7bEAwp4obSL5DUKbZ+CLiYqxiFM88vU8nidM8jT2ldu6H4qrmx9ohQeHDEKxC4uRl6hfuJCAB2h+tNk+kdNRZYxls22E18+xzoYuK4yzmlu2wLAMnFP4Cp3HplNwg4TznP37msn1ZaHRiN6c2RHLRpLPp1TWrSwa3FbDip118tALydL25d1isCsvIdCjo5LbPJorlNshwrT9pjmAqH/hyCXYUIcG7k3lQUpmSlJO7L3h6c/PqcII/X4xwe3TtRG87l8f3HB+jkLpiIek5oS93+cE1fg7hfhU6ytACw6WaBvLFV8lTZGkaaUIcFVXSRzxGM+hEPjQ4/vuu+F/f84VhtKHjXQvfbChe9+1/KfmdNWnqqnlkIQtpC5uM0YksB/DbEd0uJkUEc0R+7UG4Ku8mB1PGiexHd9XcwbhWVAWHWwt1D6STmE9jx8/+1N39n93e/sffDQ1MFS2Laic+V7V33g7jPviGIjCu45UO4MLiZDZhQAvLizVYrQ2KLuwhQg2mVg2puwuIa94cm1mayNP/DGZ18a/GZnsa+7MC95wJHJ3Q9t/ZO3jj57+dI7Nyy+HGRegFVmJ3VAE8Vz02zOuGs9kMLR5YmTFbb5s+mOYEw675yGTrr0hPofkrS3y9RGclsIRxLLsAZk6jU5XTk4UBn5wmvf+odt9xyc2t+T713SviSWYnD67d9+7jNcyv9wzp2TDduBaC2VtAMjTqiSOUKEpd0fLdTdYFp1Y0P8cEka0pGpEiYTNGV8bgSAhJCvHXzytUPf6y7NZ1KHFpBXEp9iy+HH945sfGXwivef/dsdhbIOsLBpSqIUhwDXosfM3L0LmGyKalykiZ5Ts5L+vNelbCvZLLaXmTsXiUgOyFdANg/tJB/kAnho7zN/s+UrLx5+uj3X2V+aZ0IAxtrDcp4XvrDxj356+U/NKbYL0gKEMHKlRkk06HXcJmbHYs0Ons0bykl9xmZkJrmT5jphlq5z7+SLjbi6a3RjGqQHSCik//Lu4nzJ5PMHvv3VN34v4F6rAjL40hLunDQ3A3bUgBn/Inm7F2NJSWq9GFALV4g0wxSBu+ocyJNbOgqLVzoLeWt0159u/PxLQ8/1FuYW7eYnaWPwPM9FEL1w6KU8B1qodDUfS8RL5vVBeMXplgAWaYfS16ApTXMCQNwVYnXZOJZxLRrPhfmZ2U7ykJAVugv9Lx94eNfIdiePJkm7MBIQ4Aa2MJzCCh1eddWaTJyYs1i2uMlgRquFsM05pBceSMm5KaCuxNH3dj+6Y2xbb6mXoc+X7l8hZchzo7VRczPYfixSCvfCKZoJylkKsmaPx0JbDWSa1FLw7u0QXg948q0wyM8pDTSiqrlXpfuW5dBZwHO7RjZqQXYTngvCdNMmCBvU6/kLZ5oCNJ9S0h5S5lssJN8FGbDGyytcTyKt92EDskbAVH1y7/iuXJBj4HMaxB5HIlo7d11DkOIjLWPTO5CmopIU41vFFUrnE0XsajWmOitd2Ysx74NCLn/m/CtzYVs1Gne3NfNucTVCY/I0W0vhilloy0Mxl1I+wjVLgdVc0LaTIjVl+ZkxEPI4mS0NmQW2oXJCo0vHjgYMCtwla5jWCSHqokbJBym9SG64dnR933lnz13RiMD7ky0jL3Cwkfn0/ew1v8+aKwRwyosYmmC3seCm43smJy4iGOhcfcvqXy0GHZVoVF958FhQVo0mz1twTWwp1uTf7nR8ZWhq9OjkRCkHPSXTL29q25oEjc1bwixFbmp/x+3HIlrcrjItjDNF6kRa5zu3DXpLUBOK1J3XBqFV00peY0exc1nn6dONaYVgj9Jjtbh2YHJwafvyz1z465L0R9C+WYkBKziVG6SaZ2uwYtYIUiSFmQ2l3dggs7bE0tkM1afSiD7Pw2tW3Lmw44wf7vrrTYcebc93J74PveHR6X23rPlkX3tXPTJyLoUAnh985em3/+nI9L6AhfPal25YfPMF88+OYiVIhBMvxgUL1+alXqTvCl2Lgrk1SPQmnRAShu3Jx+UgSVrhgW2PbTq66VjtSE+h66L+DVcvuShkpTj9o9pYeMOyqx/Z++DR6pFy2G5vEjlaH+ktzf3oqo/dvvy2db0DlYYl1pEmZaTfgbQ5MEayaTE7dmvWeCyPBSDzTNo3GXEf6Y3BIDkepw9ev2D94p7f3Tp0+7fe/IORyoEEW6pqLOU7T/u5O1b9YjUyddwch0d3PvjtrV88Nr2fs1zypY2Hfvjyge9ftfSOG5bf1VdWijGGUE2VSIE5RopR5kA2dwm77gY/ydU3gNJbS5xvDl47svOB7fc9vu97hyoHckwJ9f3Trm9uPPrej5794VzQpufo1/We+ZsX/c4XNn5+z9julApJovXgqkXXfHD1XdcNnJv4z/GaCz25hKZiIQPTXgGkr4Fx1xjYQsCieZmTUSBtLW6KhnsjprqgkQBgsgY9xa53LL1qcdfy3SNbRqqDhbC0pGPVqrnrQpaP0gucmIotQ5v+adt/n6wf6yr2YewyVR/7zo6/efHAYzcs/8ClAzf2pKRXTIh+E/2YcFiCP7jMLLnuWoQlqReB0vJLPjgyNXz/9r9/avCxPRM72nLlBW2L9euvxpV73vzyso7Tblnx0wHjIkXM1YsvPav3y08OPrN/cl9HvuOMnjPO7ztrXqlcqasOPk9sl7uCKZDGG6pKAqRiKFsHWDhZYDpMYtfHYsJ2rOzGtkUp1X7R83cyNqXGSk394JKugYWdA3FKphfzKgiL7JMn6No6/MpI9WA55+3gKobtAqKhqT3feOuLLxx67N0rf/6c/guKIa83nPmRxhsy3ZisEzYUhKF/jCTkHEsj9KOViacGH//a1r8+NH1QyEZnvocTh1QK2xLL+o0dX7tp+U0JsJREoFC5xZL2np85/aZarD4upVdmouENQ+v4QWLpqckzk/cWfxtnLVaE5tiJRkIr1mTOfBlZaTu3NIcpbIdntZGKLKQPqtbJDkuhKKKx2hGekge0zYEpzj4ohR2RbOw4tvHPxz59Tv8Vv3Dur3blO+qxV2vC0LwpqwXbqCOJ8nbykrqL8NKhN/9i03/bMfZWku7leMhZfka6JxNsvTn82nBlakG5m1laeLKuYoBceo/VYvKLSfcpByIswJwgirSrfiSh9b0SWUtYLJx5CqyVsuN+HKCJnaJDecrUc1vZtSl3kBq2WMuvMTeDmvybC8NC2CZkPHOAQn8cJPlZAJGInxn8TvKVD6//TDFXlLb2J23rcxM7auVfmBudTT1vewCvHtnxmac/Wo2mQhaq3T0+fUAL2EKkW1mFC4y0ifWqgcQJaso+INNjTV6PUKKOZ5Zsdlzh7NAN0ko26gEE43RCsASTq8E5ijStkziCgDuSUBLPZaouNpJN7v5FHStLufaUvkazwaSvapT4qWLQ9szgw68MPY1lALtXPLFuRDiLwkuljGnUHJvbI/nw8y/+57qoqCx1ZusduWfqcW1+eUFfsUtyS4kxl80BAYQrUVizrfu2nQG2Q3JIkLrMUThxm5YAFjDXFIrJudbzdEMQhIXSX9cQ1Hob6CudqBWp1WAAngRe5y9616o5l043xt0Mn6W+fFvC6lFl/+TueizMc5r4ydQKZZNVsCGztHGPShSO7pyKJlQ2Ir3MsclMRiIaq4/+/NqPqH4w0hQqJREQwA0GxA5J0irjGnswzmMoxeyaLNzAUqvUCplRJEPNIJPkk5l6I91BblDU+pEx6WG3gseo54H9dwlIOnLBnWd9bMOS2yNRS32ix6HTSx4G+WpUjWUkPf0qDUNJK4zSDqvSSlHyeyfq4/p3yxlzpJZHldW4mjz2l9b9yh0rbw7S1IAS8U1xp/mUEfoXyTaLQiHtLJC0sZck71hLEaQCt7TFps6VxBsBt6W3mAy3CLepS5KmA9OdghzgjC48DDKqEQx0Dfzc+t88s//Sh7b+xWh1KG19DtkMficS9f7yomKYxy7TtPDHmg2P/ckEa/mck7VNXumi9qWKTvNTSPMnJ3+iiPNBeH7fxe9b/aENC9YzCCNBdJSZWVXnGcXmfI+Apkn+D+VSHHVrCwktFbyD7gC2pVPdbEm7wiEg2h7c81wu8Qm84NqJ2wbuB5WwYgOKudyVS29Y13fR0/seemLv/cPVg6C6uIr6QsRS1KKplT3rz5pzLrOjhYFhvKakFFL6V0cBmk81xoenxwY6irVI/doknTytu3d1z7onJh/OB3lchpL8cC2ezrPS8u4z3rPyfVctvqa3lItj1czOGHn90jVRuAkz6RQr9M0jeFov4lZwhpDMntYSdyIos3OJZ0WO+68+TqYCpVl962o7JCAF8DYDogI7SKekzcg+LS3x45X9wYj9JUBJDEwjkntHdz62++83H3n66PSB1NOKxIAt6jz9PWs+csXid0axmRNkrPHo7oe+ve3LE40xnrJNTbe+kKI7P+c/XfLZ8/tXTdRVcppjMFqb/t1nP/XCwR/z5LAgkg0uw3nlBTcsu+XOMz7QX2pPXkpEhE859yTBnSyFNAt5cN2h+3Okm96hU4TMisvh+6AeVgH+cYh7WwRYnyDqrrz5vmRk4w0uZmaxi/RNd42wtkz39MWGQnR9E3ZegxPZ7QTBIVfM+JbhzT/a88DQ1GCe5xeUl123/D2nzVnWiNASyCcHf/DFFz9VzJUCFtKEjs78RCIuhaXPXXXvaZ0LojSnzXOYiOpf2vSH20e2V+Optlz5jO7Vt6z82XVzTmvErCm2ZbhIka7SwF0s/v7pJokH15tvYy8uvffQaNZPA/sYiDmtAayvfNzcjnTrpMRlk7iABO9mnPYkfbd6NZyLKsB733H7PPbsuqVw6RUqBVAM4ch0oxjk2vNqgEyhyj6yHtV++bF3T9XHcsqped1UNB5PPxVnzb3gz975hdFqKpIWqPCiuwi7xqbGakN9xXlLOsqJl6zFzcsBpJWEVCuA068wW8YGIPYYbRtKwFsxN6fuZ/u26X5XsyShAuzjIP6/W6xZi7GYdBIggAoZurOApMpGAcHukTei7RiWoIsEM93lOv640wEE4Ym06H+ToL4aQ3sul/yqybrdm2qfYe/E3v0TO+a1LdbhlSe17ThJM1lxrHJotK5bIdTvijgkIFtYLi8tL0/wOla1BStCk+I0PQNPfIH5w6u05QtRBcxtPAC7C1gyQlkxT0CwhXreXX+ccLPkjPsKGdgYKTw6h6EKHhGVlMI0LmPHAWaXkqi6MSxp22JNPTZjrnrhhelNYFBpTJaCshe0S9fDY7uspC0M8JHquGsESl/hdB3G6ypvcAwnYXGJeDI0MWRS0jo3QRuSDsKbzJa+gjf44myzdWatgxSkk0vAgXdjw4mWmpGElG50XTIyWy6Qqnd+EK8B2F5hosvhVzzAm1vHtbzJx0s6VhTCIpVxkTADE/breVboL3cKcHORJhBMSwWoDOBa7MHvt+bO5Unauyzc62eWQ24WByCSISCbmTlOaNXWYN5RTBFfha3DMDKXh1yoi0m5E5B1RCXzVN3dSA4qHEkyekpYRz3KwQMy0GxxUArzhaBNCjfUTKuETVMSEdSHq1UQtgeVeTK4dNUl7ZcHXwkCK/HeLKskyh/MreLBjmpJFEpRqUZ4c0mtNEyB8/LClw6jplwI48tovczAIrZbQzghrCXhTrFkRPuewUMYmisjYmtjMj1fv298z2R9hPOgqcbneSiLiGqjdnj6QEA0TgQFHzMd8XQkhBG7q9XnJCmPGkBwrwYPvk4JY24OBY09EOZFHnf7wCkfYwG4TYJmNBRlPHBDM/cWpdJ33DF/3Noe7qYqpCSFMyJG6sLu1LEWA7XhsiMHBbJRXD9DPijW0toLIqhJWY+4GClkVOAlxydxRWh15aE7D525NCcgAqco7O7MMHOTjNJV3V0pHS0ZiiIxX+nPPCH10Ww22dFZywq90BWH2a3unukX5a5VgXNvVEs/A2eeuD623IC/dZLqzEgzuaO6HroKcGhq6uDIfibk4s7lPcV8kifGwiR3/eUFQZCLZcTTEM8PU5jEVFH5nXhOqW9594IGGGXK9lAVEV879nY9nu7MzV3dOyd5aWN14q6ZmxExlRw6rWVvNg4eFqU/Qi0E6ZdED8i85i3gbtlnawCLvn20/CecSXMkMjfujFvCHT0IJ2QgCLeEzVljIsjCbJhfzicp28QD2x5/afCxQxO7kq8s7jz9okU3Xrn0ujBQ2FJqNrnc+8/81D2b/7Az3xuwwF8m6CRvK4oC7fiFsz+d+MFapF5DTwFePbz9/m33bh15vR7V2vOdZ/ev/6mB2y+Zv3IiSoXlGBGjZ25jBa418DbgEYKDM18bnDTgM7L+02J/Ft3g7AHL7BO0MmWANBVlB2iuJxzf4wnzUe18f64VsL8Z3DhQ2p8pXxrc+J0df/nGkecjUcun8+wHpnZtOfZ8I568ftntlmYL3rPqvY248cjuexNPl3zKfHXG5DREfVXv+veu+fD581dNpgapmIdXj2z/gxd+Y/PRVxJIccYOTu3bfOyVZwefvHLxtb98zsdLoZoAAzqLYbVJwC6/FOD2y9H1YJKuQKcShNyltJJ0X0mrcM5bB1huZQ13zBCbuTSQOQtveFTwdLZpCyWOAnOix4f/5lOhzr1jex/e9qUtR18YqQyVcu2lsF3/imJQrsXTD27/qxXda1bNXaM3nYSs+PPr7u4t9ty/9Uv1uKaH/mgyP9mY+NSFv7eia8FkzfxRkYA/3/jZfRM755UX6VeZtq7Locr++7f93Zbh129edvv1S29ozwWxverOODHSQYS5s+bopVuawsBTV6NqbJ6cM9aIZEtN6Ui3s8TTeLX9x9C0i9A2YHEyuSDtLhqJEzLg9i4ZHj9Q92sugNFq5Yk9X398z30T9eHkIR2FHsOb2wtZCNsOTe7ZNvz6ip41+hclPjHIwbxyn+qxYTUpmwleIcXcts5KZLRxkrht++jeoenBYtAGlK6SrBx2CBm/fuSVveM7n9j/yPtX/9xF89YnTxr7W3qALK6mWrcoAg240cnXkaerNJ29AsA2xRYK3lHbvSm0YjQPwu4/fxE8NLlCcDviGBW6TSOPXAibD7/69S2fOzy5JxJxnhfQytER6rR+F45Uj9TjRiHMaQ4iiqCRxlzp2svmFqvk/2qiJlS/RU1zMDg6fZAx5gkwOHYtKOfa63H95cPPbzr2yp0r7/r3Z92V48UmtgWnFIX0+C2JfRB0qlEQAVXwKVbp5ixaiG5Aa8ToYhxb4EPJdTMPDR5Z5a5rQBSG2IzVIOlTJMH4vvHd923+/cHxbcn1zgWmFX0mGZ28lrqohrzAWWia6WId8aRsP2OeuC1rNgyq00HCvLbFsRRCHk+aJv045EGOJ25ZfnnzF7629QHGBMWKacuWRCuFVGwEdknbDQOuRQTcdgwXbjJvK2JrEaQoBuneLP8NNbJSwXH01t2mZEsecvDIT/3gVw8+MTixTdkGr2+9eZwrko22XOeK3tXF0NBrlHIE6TPvxn9xrAeIOLFtcObcxYvKA7FsyBm1FI8GA95Z6PryG3863WjgAjA3HQ/eDgs6zcvs4BdlrTwZMNJUzdCEtw7zrvU2kKZqskamkVy4DF8Ix3Ca7gZOGpQJSQj+Qq9Ko3Fs+jBYyeMZi5bMSVzkVGP8qoE7zunfEAkrzMdcubrZAvlLmrEiVI/go+f9VkeuZ6I+KsAb2WiaAEvc7mht5Eh1zMXj0vXHYlMGXVqBCSFjXqVBSqIFT8YCUH+mlYYpGKn6gVWS4WQnUirjbt5uHB631l74dUBdkOHMVmboVQQe8lyTuKMJavWWHCkaot4Wlt+35pMfXPeRYsCFZdQka1546SkmaMBYOSSNvySQXzdn0e+/489uPeMDya2T5JI6P2gearCWJq8CNLdnhVsTxS3jIMmUGy758cqL4O06xPzaU4RvqUlo5DOxb512r5siKzeFHRBOxo4RVlD3NAfpfqIYBFMNojywCymlUu0O+tsWaxwxsr9QKYvISAgR8HDDoptuXPmhFd1LcpxNR7Z7jqjfwPH9pxOpcnumVWsynNO/cqDr0xfM2/CP2+7dcmyjap9P4E3vYQZTjclLF1zRm+/Av4irh6k/JDGfyWf5JCJUDppoyOikhVnJ1hkwZUTdj2Pj2iwFWbOn3WCDKq1B5RI0YTTWteit1k42ohuSqIOmb3chB7VIvj2y67n93zg0tbsYti3qWPWOpbf3l/tiMJMz6+Zd9vLBC7aPvJQPirrJOBZRQ9SSOH1lz/rrVnxgff+lnYWwIaDRsAGTcL11ZMmcp92A7YRuEYalCcYb0Bbwdy6+/Lz+C54dfPKBHffsGH0rMW45ZTt58kElqiQv9RfWfjSvAAe6FJT81ZuHd/7g7Uc2Hn6lr9y/tnfdjQM3LO3oUboBDUKykwq0VxyjYgUcl941q8mf4sBSo+K4anYGPySxrdZvCXQdlapIrAq9hyaOPrPvgef2P1CNJnRB7/VDP9o+/PLd5/9hZ75HkeMxLOpadOdZn/j6lj/aObxpPBpOnqwUdixqX3X5wC1XLbulI19SYzzCch/MbV+2HThmqZyU3g0AVDKellzS0LCefFlAZ6508/Lrzu0/76tv/e0LQ08PTR2qiWqe55d1rvh3a+4+r2+t0W5iiml7cPcjX9z4x2P1dCnqCHti/w+/veubv7T2w+9YcPnCcn6iTmJQsn7sOKaUZIVMztoCgdnpef/rT9irwm1eHdtRHJnuhxZuRQyzPd0Ispx66xovH/jxo9v//Mj03hwvMOZWv081xi5aePMvXfhfo9gESW0BHJo8/OzbDw9Obg9ZsKD9tEsW37C4Y0FDWH9BBq04d9sGSjn40d4ffOW1P6hGFT4juRqtHvvWbS8m8Rn+ICp20ImaIC14vzK06+Wh58cbI5257nctvWZJx7xaZBCQ3CGvHH7tM8/92mjtmKLZzD0mE2ddjxuXzL/sQ2vuum7g/IkaY4xUe6Tr/tBryRlzTcnGvcq05302hilmb2BVEujYXZUc+x3AC8PVLl0c4EnsAYuf2PXVh7Z+PnFt+aDUtJayHHY/P/jgTas+urhzoW4BqDSgr63/vWs/lE+tSyxUlF1rWBIocOPUQIh7xWMJW1tikuxgIVQCIwvJyPZKwC7ndBp7pAJr5yy/cP7y5JZI4DTdUN4NhzuqkXj20LN7x3b1tc3DYkDyxEnaEbDckwcef3Houc9e8Se3Lt0w2YCZjYeMlNtRJJI18aUtlBUGRBEF3GQzah+iojV+F5eg7jy2MUFVyPMJqo737DL5+uahJwI7jZ78riQKHqvBsSocnYbRiupEEDhxEJMcCpthYmjiz2f8Ccw0xKMMmp3mkBadQJiIJC0YqcLhKgxX1ByHJDvPJuoTeyZ2t6vVoBJoT2z6QXehJ3nK//LsbwxNV0MimUx7ubBzxqlvUoHu1tJ5F2SbEpBiGd2nytwwNAqt1EV989CP61E15Tz9e9fT3uAgiSGRJPFk3opATCMYd9JIyE8KM47DmjbqpHS8xM5PyYhztxtNmPQ2VmKNnJPylEx7LtIXIwD8oo15gCyFpbH6+HNDL+UChxW6ysD8WagI0rSRunUsFpBtx8YOWTIQyFpHKf01temJRX20drAQlpvuRLx4QshI1M+ed1VEDJ6gxmdm3zpVlfc5p5laRE2N6sxX/kAlY+yrxiy4iWEStm+9q9B10fwNQtWCBByPyFXY4sWjlcMBI8KQBDCMOflWR9viPdlCwxRkWgYFW5oL84LsFsA2dgYhy/UWFsWidtxnjWS9Eo1dsui2BR3zBbgCHMzcw2sX/AFeBmHVNcTxCXrwF0aYy2b3foFV8WdELpuRxZZNJWE93Jay8HD5wksuW3hl4hMjEVGyHsHakNFpnafFAvefe9vtkezA95bR7oYWKunojraYLJlFR4OTNin9bArSwm3CyQWF1X3vCHguMUtejUjGU/WR5OPzFt7wnrM+rSQYKF5j0joBjiyQ0q+WcFPe9q3BTxjUs+5V2DFGNLTAvW1N4GSM3DJivLsSy7q4vf9X1n/y5uW3NUQ0Xh+LhXDUBofR+uianjMvnXdu3Ue8FF4Ji3LxQMumrcNjmUpWE/NChC6c/QhcNIaPXta75oplH3xsx1fCIKdbQGtxJfmZlb0XbFhyxzsG3sVZUd/ZHEjVjHY+CZIu0ZEN6SpFDMjub8+reXtHULOfUT2F2DxMCLdIHBhpY7cDkvorSTi/snvgC1f8zl++tuqRfY+8evTl5AfyYT4Wyd0ytbTrtF8//9dUPiuddTRMsr8fmpM0iEnXStRCwGKMrG5nZgZLV+hQ9AJoL7I0uv7JKRfablr9i+Xc3JcOfGtk6kDyI0u7zlkz97IbzvjZvrbuyXo6bc/dj7hLSNaoOplJ6fIJpc2MqYMkyx1mCPM5pNF9iFjZZEb2krID3t9iOzylbcqoR4r6/+R577th6Y33bP37TUdfPVY5muP59X3rf2bley7qP6MSEccqybJCS+oaDQG6DhhabMOqxPhGeKNdXpuT7eaTdIo1nYquN6CU77hlzV3nzL9iuHIweYcXdKxY0DUvyenGa4YENz5O95ILIvIJzW83A6e4z4VtRiUrHma+eMa8+Wk618ClWRPsxGG4ndimnRdkFSqQMODgFAx09PzG+R85MD1xrDpUYG1nzp1fYMFY3T6Ye+IzsmlTq3RdWQxm1DpP/VqhlpcR5l/wK82om6XRgHs7sLsteXCjDiKE5d3LVvUvY6pwq6ipmGyNRw1PTqRHnKwUEQQEFNxKoyWWOhQhsRHKWzZO7RaKRFDjqpkzTjwvo9siyFVn0sjWN1m+yQbkOVvS3rmiszP5ynQE07ZT1C3JBkdtYKTcVMAR4IRrWsgVipRbUtJFoRldalpOibt9gQwN40ZMnm7XnVI1KW+XmKWY7MexmyVkZCMwzhjiAi3O3JUAMIg3dSLm1Qpp0ZATgArhaiyuxMkJHY+zzmR4FcEn0uKP/nuTcF6R7CnEOXdt2a6ZAjxVAdpGiwNwmPC2Eo9Fe3aF7SMlyylkTCZUyR5RzKubVv1K7mgwz21hoSZ23fF6xAqEUwI3PcGksGPGGANLOPpakZIsK9RCHTgw6K4lJ7JKjOSGmEiSHapmf7Hwm/jA7EkAIuKAUX8TIQf+fIC06hiz1fU+O8DKlewVBbemsEmgFrWjJBC1FmlWVAphwISD+XC8ThLKfdOAycXv3Nu+hOOjQnpxt/QDLOdx6DAjob/NSqnYmRMc42ZA5Hrp0kbyFSdhT94iI1syg8Si418YLzpuN7mjCi0DrP7T1MYbTLiwyRi5H1w2RIWBcK0c7gx3m8nxr+HNN6mTccNeK+4EYehVZGStPOcoUyNp/Zn5S5eRYtXUF2oV4YoD4GRghkBRokwmEf6noxNUPtO8SEHIXTrNS4hcgbcfI8xWW8sAa/Xl0KiQ6RRsIsV5AQxmJdkzIJz2ASrWSbp9Xrr8y23g5cbgMSD7nplLr6RVIhHSg5oge2/lccvR9n7AThvG3ZS22yrNLV1+vLY7J1DLHbZwOwEmp/jHuigN9eWoDoq0fd5g6DS2woortYTFWkxEB7ib3GLEVkmi0ML13DAnuwLTq6XLxghQI3RLGiUcrW93vnHutFxwpYXrOZGuoMS5/qUmxjqufJnj0yUpFEqrJgfuVUnpT/gwO98GXpWdE8FjAF/i0PZ7YY886tVg4dXbPZ780kngN6g0pVWAlS/ChbdBVEnfBeHGTQWQgF140Sut4jlJYH2/MrIfRZAmdL0zM3Ypt6T66bbs7BbvMrKCGhffC73JnjU7QbJIF6S3txfZDZ5aFyHcPnAXBEqa1dmiMllLQR9AN6lqc0jHTDxtMHxpyQPqwJKQY14rZYVhCKsvg/Z+iOspJLh316IEHk5LAw2W8T4WM8QRSXOwsyh+HipIpEKFqVytkMoeAXFPfh3aez3Sfy+ZbxTBG+RidBkOuOZV4YvPgHTYAvv30gTT5RA2zqMagsYX3zo75mo26YaObrj2bggLJnUCcBs7cLpYzJiMU74v8NZ40M0zWJTVy1TcVeREDCj1oS4Fo9ua0mdwvU10iHkmUYLvIF3Egp19dI86wbw2wBSasqnqwIgapfR9HJ32Bpchgu3AYcyhWVYhuALkvFkrBc/eiH0aaV3/H6HUA7VJKzYcezUfDERctAS2J4I1eyWgMw7ShVYujhbOVDhxEe5ddRzuc6yjbA7ZZ9amqFXDOpUQbuWdbghzA8rg+S/6J3gNOdyz0Lgvk8DKZqakUqR6nxvArwZ52azN188ysJIzfwAuug2WXQDVSYhrKjASTXqhWAPhpgbirqjwO2EYIQyJOxPaHwVe+42YoUsmpI8hbjpt/M2vvpOVZBkO1RrVTxC43lQgZL2UnnOnDYMeg8AJv+YPveGuRq9YqScDjgHrgfAugMtB5mfzys6yol9ylp8Di1bBmqvhmb+Do7ugY67L/pDA9IJuTvTyOblT7YIT0yIhyAge4fdxNEikjQx0XhRl/tWvi/Er6lD2iAoYo2waZ95uXYSF+RaRpaCCIoxIeuiROCkdfWoAR6kKopWlxJ6la69lSQLYC+GNyc0KcvGsX9UTAFjJKRRh8Uq44WMwchCe/ypMj6ivYOULHSJKNlB604wtCMPIG4VP1K6JrbJtYIcTif6dE3mTpvHQDBDrnhk98s91QphmWsyzVUA2oHhLgQhTysFru0MBPs7cC+Dcl4cAj5KgAs9UW9UFoMnfOAXhBgjOBVgCJ8gJ4YQ5nXPUfz2/Aq8/AnueS6cMQjeAwKQnnE9VN6Vw7VNNyzIZd4YKqQScvwPSJoVj/sw2XHAbHkt/DLqpu8F5SV9QXleUBSPrgDTvSjTfObgtspqY4GSRCfPFSKl6jCSOO1gI+VuBzZnNiOqEBpaBVy9cfAecdS288i04shWiapo5gut4Acspu607M5SoJbgMHK2UW2Qn7G5pEh1x5m1qZQFuYXHcKGtOFyQjyscoumT8KSM1Y39DAlaIhG1vxDDLNQj5/IujkfXPRumlK0LxVuArZm2j+MkELPWa8tDdB1ffDfvfhJe/DpVRiGqKUzU3smarA9O+l0522gCZ03KLT4MBGXOwCkFgC5TYFej0S4Xh0wu8FPBQxkp2ku7PjUTUU5zD0r3l2LJn/g1MYqE/0ARHwDwJWkl0ewGIQg5zoZX5M7gr0uukT32tB3KrIH8NyNwJB6kTIiv8546Exavh3b8F594GfcuV6RINMnpPmE8zEsgdiWA4SaKwQJX7AVcySRL7N1UD0yuawGlF95l9pYUNUfcVtuREffTihdem2+q9SAsk2Vct3dwOElHSjsO7UQi6MxbI6gCUvrXdRGICWB7C06Htbshdr1B1wp7Z0W74vz21Crz5Q9j/KozuhWKH0pxFrJhtkdIWg0mDKHZX4lICmvZzulXLmjidB3DSiNeRgyf3P/3HL/76aO1IW9jJGW/Etalo4sw5F3zm4j9Z2DEPHajuQ+c0S0UFByADF5KILxD8MfB2NXLm712qKg9evAIKFybhQipfcWKfkwNY2pENbYPh/bDx68pX5krmInHCdXHwZpHpRQKYcc2oyj5zG1LoTmH9zApbbz/5g70PbTr8zHRjcm7bvLV9F3/wrA8vaU8sWRo+caUtA2QMRDfu6fVPTHp9PYg5bkuTXLrULyDVLROxNUCMQdvFUHwnsP4T2seclMBCeI0fhY33w+CLUOoFHjgm3VxXHNNIm551OIOLW5GX15+aH7dsUNC0cZm58aG+IhycbGwffr0aTfcW+s+Yu7ScK0zVU1sVmq2LnPnrXsFtOmXMbbZ2ojqWAHMbrLEF3rpLMQXhXCj/NASLgJVPogt1sgFLn3oVJofh5Xtgcshkc9iizmk3uvDtARnr080RLlbmnm9VliZ2LKimmUoc2vJGTa8Sq2kthoKiljBjZGEJXdvctM0AfaKmajn9lpXf0VF/+VYIB1SoftKdkxJY+kR12PEU7HwCRE3F9QF3vDYDIp6WRk5MNG8yZ6hARG0Mc7vgGfGYuPncmZPAPqedXHCrv7kZ94B0y7V+vLRujgEhSPFlgIsUE98XdEAxidCvB9YOcHJen5MYWPpMj8PmB+HYNqiOqNhLCblLHyjWu2l44aIHzQUYJ5WaqCBwLBRnHkvJSfLIcU8iqSMGdm8vB6diypCmYkaBzeCS+frh2DdbBd4OhYXQfhME807qy3LyA8sEXkdgz9Ow90mIp6HQaeMn6aVj1NegK9SmxbhRbjNK4UYFGfGYnG6gFCbZNOYHV02Dc5GcCAXi7w3cqnT7S5MPK8BzkD8NCqdD+fLZWbabAesn0V5wcDMMbYa3n1J2S++gQBeD7gnX9TDhqy1YgxRYVlOTYYw7uLgQDcM160+xbEyBC7jVB/0p97JRI/s2BYUFUN6gUj/gs7oMLgPWTzpCwNAW2P5dGNkBxS6VGOq175SaYjjxwv2RGF3jw4U8Ova3D9CY4KglicyZdCQFjgjpTsMgsJukBJm4F27di5hWX+m9HUrrgeVOEUiduCWdf1UlgcOCtdDWA5NHYOPfAm9AWLKNEgEZHQtsaYhAys3V4E4Am+K5vituw3aM+gOrsSabyxkCOy/A6QMEerIjUjR6943QcTmw4ikFqVPTYtHTqMO2h2HvY5ZN5ST64aYRWX+FM0efIvnEOSGiaM8d5pJ2yCdg1nuSGg76NP08bh+nVKgqLoLe2xRHxXKn5pt/KgML0j7m6gRsuR/G90BcTQMvcLIcXvmFkWSNu4XnHgFrnaOzQ7adISAekHHX58ml49lFqhgTdMHc2yG/AHj5FH7jT3VgYdo4vBN2fAcqhyGagrDo2AfTHoOq4Nivx5zsuwm2cOMwHCfNdFkC4S9wH6fuQy8shs5zoe1sha1T/rQEsIxnrMHuR2D8bRjZogIvnjeDD9j5CbhAAAs7FigmDGe21MgJq2nnE5HKlzYlVNFYGksV5kHH+dC5AYL2FnmzWwlY+kQN2P8s7HkYaiNQ6FJNqpgngqU6gSikJ+Dwdh008VukJ4cR1sr8eFVVErvOg/bzoXRaS73NrQcsfSaH4Ohm2PkghDkI8qlNYk7HDOlTiRxmWtVGQ4Ud66a8Q7oIWbrDV0Sqftx+JvReAW1nnIJJXwasnxx4CaiMwFv3wtgulTZyuzkxIOIwzK/eoG4SI304zDo+rCcmQXqSJSx8P5RXQcue1gWWPtURqI7B1nugMZH2oHJSabYBOFj1EQM12w6PtKcJ0bQzrcG826DnYjJLnQGrZU/lCEwMwr5HoXYktTqh07ExmsQWUrqdxvR4aUrCbkdPXGppCSx+f/rjQau/pRmwSNpYhX3fg7FtUDmoKAnO3XIvLCfTNmLt+xQ9FkLnWTDvBgg7VbKZnQxYx3OOozD4GAy/BvVRyLdbKjVtMuaCBF5JLFVRjS7d50LfFcpWZZDKgPW/i+slHPgRVA/DsVdVnThXtrGULgcJ1VfYGFZWav610HE6BMXsPcuA9X98RASHX1DwGt8KU2+b4D3J+PKd0Hs+9JwDbYsg3529Txmw/mXwasDkXgjb06lGgFy7yv4SExWetE3DGbCycxIfnr0F2cmAlZ0MWNnJgJWd7GTAyk4GrOxkwMpOdjJgZScDVnYyYGUnOxmwspMBKzsZsLKTnQxY2cmAlZ0MWNnJTgas7GTAyk4GrOxkJwNWdjJgZScDVnaykwErOxmwspMBKzvZyYCVnQxY2cmAlZ3sZMDKTgas7GTAyk52/mXnfwkwAHkfPlEQWHwkAAAAAElFTkSuQmCC"
        vCard.add("PHOTO;ENCODING=BASE64;TYPE=PNG").value = photo_url
        vCard.add("LOGO").value = photo_url
        vCard.add("EMAIL").value = "support@relay.firefox.com"
        vCard.add("tel")
        vCard.tel.value = data.get("number", "")
        return vCard.serialize().encode()


class TwiMLBaseRenderer(renderers.BaseRenderer):
    """
    Twilio POSTS its request with x-www-form-urlencoded but it wants
    responses in TwiML XML.

    This Base renderer also provides a default render() for all errors.
    """

    media_type = "text/xml"
    format = "xml"
    xml_header = '<?xml version="1.0" encoding="UTF-8"?>'

    def _get_resp_status_code(self, ctx):
        ctx_resp = ctx.get("response", None)
        status_code = getattr(ctx_resp, "status_code", None)
        return status_code

    def render(self, data, accepted_media_type=None, renderer_context=None):
        # if a view returns a Response directly, data is a string
        if type(data) == str:
            code = self._get_resp_status_code(renderer_context)
            return f"{self.xml_header}<Error><code>{code}</code><title>{data}</title></Error>"
        error = data[0]
        title = error.title()
        return f"{self.xml_header}<Error><code>{error.code}</code><title>{title}</title></Error>"


class TwilioInboundCallXMLRenderer(TwiMLBaseRenderer):
    def render(self, data, accepted_media_type=None, renderer_context=None):
        status_code = self._get_resp_status_code(renderer_context)
        if status_code and status_code > 299:
            return super().render(data, accepted_media_type, renderer_context)

        return f'{self.xml_header}<Response><Dial callerId="{data["inbound_from"]}"><Number>{data["real_number"]}</Number></Dial></Response>'


class TwilioInboundSMSXMLRenderer(TwiMLBaseRenderer):
    def render(self, data, accepted_media_type=None, renderer_context=None):
        status_code = self._get_resp_status_code(renderer_context)
        if status_code and status_code > 299:
            return super().render(data, accepted_media_type, renderer_context)

        return f"{self.xml_header}<Response/>"
